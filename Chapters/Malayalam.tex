\chapter{Malayalam}
\secstar{Introduction}

Like many other Indic scripts, it is an abugida, or a writing system
that is partially “alphabetic” and partially syllable-based. The
modern Malayalam alphabet has 13 vowel letters, 36 consonant letters,
and a few other symbols. The Malayalam script is a Vattezhuttu script,
which had been extended with Grantha script symbols to represent
Indo-Aryan loanwords. The script is also used to write several
minority languages such as Paniya, Betta Kurumba, and Ravula. The
Malayalam language itself was historically written in several
different scripts.

As is the case for many other Brahmi-derived scripts in the Unicode
Standard, Malayalam uses a virama character to form consonant
conjuncts. The virama sign itself is known as candrakala({\meera ചന്ദ്രക്കല}) in
Malayalam.

When the candrakala sign is visibly shown in Malayalam, it usually
indicates the suppression of the inherent vowel, but it sometimes
indicates instead a reduced schwa sound, often called “half-u” or
samvruthokaram. In the later case, there can also be a -u vowel sign,
and the base character can be a vowel letter. In all cases, the
candrakala sign is represented by the character U+0D4D malayalam sign
virama, which follows any vowel sign that may be present and precedes
any anusvara that may be present.

FIXME samvruthokaram needs more explanation, refer
{\url{http://thottingal.in/documents/Malayalam_Unicode_Report_of_Workshop_Kerala_University.pdf}}
and {\url{http://smc.org.in/doc/rachana-malayalam-collation.pdf}}

\secstar{Orthography variation}

Malayalam has two orthography variations, both actively
used. Generally they are known as Old orthography and Modern
orthography. Old orthography is also known as traditional
orthography. Modern orthography is also known as reformed orthography.

Old orthography is generally identified by large number of ligature
glyphs, often formed by more than one consonants or vowel
combination. For example, in old orthography, consonant {\meera ക} +
vowel { \meera ൂ} will form കൂ as a single ligature. similarly a
conjunct {\meera ക + ് + ത} will form {\meera ക്ത} as a single
ligature. Font developers of traditional stye fonts design and draw
this large set of glyphs. For a reference font Meera, the number of
glyphs is approximately over a thousad.

In the 1970s and 1980s, Malayalam underwent orthographic reform due to
printing difficulties. The treatment of the combining vowel signs u
and uu was simplified at this time. These vowel signs had previously
been represented using special cluster graphemes where the vowel signs
were fused beneath their consonants, but in the reformed orthography
they are represented by spacing characters following their consonants.


\begin{figure}[h]
   {\meera\large  മലയപ്പുലയനാ മാടത്തിൻമുറ്റത്തു\\
മഴ വന്ന നാളൊരു വാഴ നട്ടു.\\
മനതാരിലാശകൾപോലതിലോരോരോ \\
മരതകക്കൂമ്പു പൊടിച്ചുവന്നു.\\
അരുമക്കിടാങ്ങളിലൊന്നായതിനേയു -\\
മഴകിപ്പുലക്കള്ളിയോമനിച്ചു.}
   \caption{Text rendering using traditional orthography. Font used is Meera }
\end{figure}

\begin{figure}[h]
   {\lohitmalayalam\large  മലയപ്പുലയനാ മാടത്തിൻമുറ്റത്തു\\
മഴ വന്ന നാളൊരു വാഴ നട്ടു\\
മനതാരിലാശകൾപോലതിലോരോരോ \\
മരതകക്കൂമ്പു പൊടിച്ചുവന്നു\\
അരുമക്കിടാങ്ങളിലൊന്നായതിനേയു\\
മഴകിപ്പുലക്കള്ളിയോമനിച്ചു}
   \caption{Text rendering using modern orthography. Font used is Lohit Malayalam}
\end{figure}

The above examples give high level difference in orthography. 
Since both orthography is prominent in day to day usage of Malayalam, it will be helpful to get more
understanding about the orthography variation. So let us go some more deep into this differences.

For vowel signs, only u vowel({\meera ു}) and uu vowel({\meera ൂ})  make the difference. {\meera ു}
\begin{figure}[h]
   Traditional: \\{\textexample{ \meera ക + ു = കു  \\
ക + ൂ = കൂ } }\\
 Modern:\\ \textexample{ \raghumalayalam ക + ു = കു \\
ക + ൂ = കൂ }\\
   \caption{Rendering difference of u and uu vowel signs}
\end{figure}

As you can see, in traditional orthography the vowel sign attach to the consonant, while in modern script, the vowel sign is separate.

Reph sign varies in both orthographies. Reph sign is formed by VIRAMA+ RA ie {\malayalam ് + ര}.
\begin{figure}[h]
Traditional:\\ {\meera\textexample  പ്ര }\\
Modern: \\ {\lohitmalayalam\textexample  പ്ര }
   \caption{Rendering difference of u and uu vowel signs}
\end{figure}

As you can see, in traditional orthography the reph sign attach to the consonant, while in modern script,reph sign is separate and it get re-ordered to the left of consonant.


\secstar{Reference fonts}

Since we need to illustrate both orthographies we will be using 2
fonts. For old orthography, we will use Meera font and for modern
orthography we will use Lohit Malayalam.

\subsection {Meera Font}
{\meera മീര മാതൃക }
// FIXME: Short introduction, designers, maintainers, usage info, popularity of the font.

Meera font is maintained by Swathanthra Malayalam Computing initiative.

Homepage: {\url{https://savannah.nongnu.org/projects/smc}}

\subsection {Lohit Malayalam Font}
// FIXME: Short introduction, designers, maintainers, usage info, popularity of the font.

\subsection {History}
In 2004, Red Hat released five Indian language fonts as open source licensed
under the GPL. In 2011, Red Hat relicensed fonts under SIL OFL 1.1 license.
The fonts named Lohit which means Red in Sanskrit. Currently, the font family
supports 21 Indian languages: Assamese, Bengali, Devanagari (Hindi, Kashmiri,
Konkani, Maithili, Marathi, Nepali, Sindhi, Santali, Bodo, Dogri), Gujarati,
Kannada, Malayalam, Manipuri, Oriya, Punjabi, Tamil, and Telugu.

Now, Fedora Project and its contributors took the responsibility to consolidate
the further efforts and improvements of the Lohit fonts.

Homepage: {\url{https://fedorahosted.org/lohit/}}

\secstar{Technical details}
\subsection {Opentype Script Tags - mlym and mlm2}
\subsection {Reordering}
\subsection {Dotted Circle}
\subsection {Samvruthokaram}

Samvruthokaram is a mid vowel sound representation for vowel sign u. Now a days, 
it is denoted just using virama like {\malayalam അത് ഉണ്ട് }, also known as Pseudo Samvruthokaram
\footnote{Chandrakkala. Samvruthokaram. Chillaksharam.
From the perspective of Malayalam Collation
R. Chitrajakumar and N. Gangadharan
Rachana Akshara Vedi \url{http://www.unicode.org/L2/L2005/05210-malayalam.pdf}}
But using vowel sign of u and virama-{\malayalam ു്} to represent this is not rare.

\begin{figure}[h]
  \centering
  {\meera\textexample  അതു് ഉണ്ടു് }\\
  \caption{Rendering of Samvruthokaram with Meera font.}
\end{figure}

As you see, the vowel sign u attach to the consonant and virama appears on top.
With modern orthograhy the rendering is differnt, with different u and viram signs explicitly shown as shown below

\begin{figure}[h]
  \centering
  {\raghumalayalam\textexample  അതു് ഉണ്ടു് }\\
  \caption{Rendering of Samvruthokaram with Raghu Malayalam font.}
\end{figure}

It will look a bit odd to see these two signs in rendering in modern orthograhy. In modern orthograhy samvruthokaram is very rare. 
Because of this there was an attempt to add a glyph like virama to denote Samvruthokaram in fonts like Raghu Malayalam and Lohit.
But reverted recently(2013) since it was quite an experiment
\footnote{Red Hat bugzilla:Samvruthokaram ligature is wrong \url{https://bugzilla.redhat.com/show_bug.cgi?id=1013183}}

Insert content from:

Red Hat bug: \url{https://bugzilla.redhat.com/show_bug.cgi?id=242016}

Pango Bug \url{https://bugzilla.gnome.org/show_bug.cgi?id=504810}

ICU Bug \url{http://bugs.icu-project.org/trac/ticket/6108}

\subsection {Reph}
\subsection {Dot Reph}
\subsection {Chillus}
\subsection {Conjunct Signs for യ, ര, ല}
\subsection {Stacking}
\subsection {Font metrics} 
\subsection {Positioning rules} 
\subsection {ZWNJ and ZWJ Signs}
\subsection {Prebase substitutions}
\subsection {Akhand forms}
\subsection {Below base forms}
\subsection {Below base substitutions}
\subsection {Half forms}
\subsection {Postbase forms}
\subsection {Latin glyphs and punctuations}
\subsection {Kerning}
\subsection {Shape references}
\subsection {Left and right bearings}
\subsection {Italic variant}
\subsection {Bold variant}
